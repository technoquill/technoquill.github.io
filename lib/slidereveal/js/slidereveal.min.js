class SlideReveal{constructor(a,b={}){if(this.options=Object.assign({width:300,position:"right",filter:!1,filterStyle:"blur(2px)",overlay:!0,overlayColor:"rgba(0,0,0,0.3)",closeOnOutsideClick:!1,speed:400,pushBody:!1,selector:"body",trigger:null,autoEscape:!0,zIndex:1050,classNames:{},onInit:null,onOpen:null,onClose:null,onEscape:null,ariaLabel:"Menu"},b),this._classNames=Object.assign({bodyWrapper:"slidereveal-body",bodyOpen:"slidereveal-open",panel:"slidereveal-panel",panelContent:"slidereveal-panel-content",overlay:"slidereveal-overlay"},this.options.classNames||{}),this.body=document.querySelector(this.options.selector),!this.body)throw new Error("SlideReveal: content element not found for selector "+this.options.selector);if(this.panel=document.querySelector(a),!this.panel)throw new Error("SlideReveal: panel element not found for selector "+a);this.panelContent=this._preparePanelContent(),this.bodyContent=this._prepareBodyContainer(a),this.isOpen=!1,this.init()}init(){if(Object.assign(this.panel.style,{position:"fixed",top:"0",[this.options.position]:`-${this._panelWidthValue}`,width:`${this._panelWidthValue}`,height:"100vh",zIndex:this.options.zIndex,background:"white"}),Object.assign(this.panelContent.style,{position:"relative",top:"0",left:"0",width:"100%",overflowY:"auto",padding:"0",boxSizing:"border-box",wordBreak:"break-word"}),this.panel.setAttribute("role","dialog"),this.panel.setAttribute("aria-modal","true"),this.panel.setAttribute("aria-label",this.options.ariaLabel),this.panel.setAttribute("aria-hidden","true"),this.options.overlay&&(this.overlay=document.createElement("div"),this.overlay.className=this._classNames.overlay,Object.assign(this.overlay.style,{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:this.options.overlayColor,zIndex:this.options.zIndex-1,opacity:0,pointerEvents:"none",transition:"opacity 0.3s"}),document.body.appendChild(this.overlay),this.overlay.addEventListener("click",()=>this.close())),!this.options.overlay&&this.options.closeOnOutsideClick&&(this._bodyClickHandler=a=>{this.isOpen&&!this.panel.contains(a.target)&&this.close()},this.bodyContent.addEventListener("click",this._bodyClickHandler)),this.options.pushBody&&(this.bodyContent.style.transition=`transform ${this.options.speed}ms`),this.options.autoEscape&&(this._escHandler=a=>{"Escape"===a.key&&this.isOpen&&(this.close(),"function"==typeof this.options.onEscape&&this.options.onEscape())},document.addEventListener("keydown",this._escHandler)),this.options.trigger){const a="string"==typeof this.options.trigger?document.querySelectorAll(this.options.trigger):[this.options.trigger];a.forEach(a=>a.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),this.toggle()}))}"function"==typeof this.options.onInit&&this.options.onInit()}open(){if(!this.isOpen){document.body.classList.add(this._classNames.bodyOpen),this.panel.setAttribute("aria-hidden","false"),this.options.overlay&&(this.overlay.style.opacity="1",this.overlay.style.pointerEvents="auto");let a="right"===this.options.position?"-":"";if(this.panel.style.transition=`transform ${this.options.speed}ms`,this.panel.style.transform=`translateX(${a}${this._panelWidthValue})`,this.options.pushBody&&(this.bodyContent.style.transform=`translateX(${a}${this._panelWidthValue})`,document.body.style.overflowX="hidden"),this.options.filter){let a=document.querySelector("."+this._classNames.bodyWrapper);a.style.filter=this.options.filterStyle}this.isOpen=!0,"function"==typeof this.options.onOpen&&this.options.onOpen()}}close(){if(this.isOpen){if(document.body.classList.remove(this._classNames.bodyOpen),this.bodyContent.style.transition=`transform ${this.options.speed}ms`,this.panel.style.transform=``,this.panel.setAttribute("aria-hidden","true"),this.options.overlay&&(this.overlay.style.transition=`opacity ${this.options.speed}ms`,this.overlay.style.opacity="0",this.overlay.style.pointerEvents="none"),this.options.filter){let a=document.querySelector("."+this._classNames.bodyWrapper);a.style.filter=""}if(this.options.pushBody){this.bodyContent.style.transform="",this.bodyContent.style.transition=`transform ${this.options.speed}ms`,this.bodyContent.style.willChange="";const a=()=>{document.body.style.overflowX="",this.bodyContent.removeEventListener("transitionend",a)};this.bodyContent.addEventListener("transitionend",a),this.bodyContent.style.transform=""}this.isOpen=!1,"function"==typeof this.options.onClose&&this.options.onClose()}}toggle(){this.isOpen?this.close():this.open()}destroy(){this.options.overlay&&this.overlay&&(this.overlay.remove(),this.overlay=null),this.options.pushBody&&(this.bodyContent.style.transform="",this.bodyContent.style.transition="",this.bodyContent.style.overflowX=""),this.options.filter&&(this.bodyContent.style.filter=""),this.panel&&(this.panel.setAttribute("aria-hidden","true"),this.panel.style.transform=""),document.body.classList.remove(this._classNames.bodyOpen),this.options.autoEscape&&this._escHandler&&(document.removeEventListener("keydown",this._escHandler),this._escHandler=null),this._bodyClickHandler&&(this.bodyContent.removeEventListener("click",this._bodyClickHandler),this._bodyClickHandler=null)}_preparePanelContent(){const a=this.panel,b=this._classNames.panelContent,c=document.createElement("div");for(c.className=b;a.firstChild;)c.appendChild(a.firstChild);return a.className=this._classNames.panel,a.appendChild(c),c}_prepareBodyContainer(a){const b=this._classNames.bodyWrapper,c=this.options.selector,d=document.querySelector(c);if(!d)throw new Error("SlideReveal: selector not found: "+c);const e=document.querySelector(a);if(e&&d.contains(e)){let a=d.querySelector("."+b);return a?a:(a=document.createElement("div"),a.className=b,Array.from(d.childNodes).forEach(b=>{1===b.nodeType&&(b===e||b.classList&&b.classList.contains(this._classNames.overlay))||a.appendChild(b)}),d.appendChild(a),a)}return d.classList.add(b),d}get _panelWidthValue(){let a=this.options.width;if("number"==typeof a)return Math.abs(a)+"px";if("string"==typeof a){if(a=a.trim(),a.endsWith("%")){let b=parseFloat(a);if(!isNaN(b))return b+"vw"}return a.replace(/^[-+]/,"")}return"300px"}}